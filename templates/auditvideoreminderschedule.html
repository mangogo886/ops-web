<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>{{.Title}} - æ¡£æ¡ˆå®¡æ ¸ç®¡ç†</title>
    <style>
    body { 
        margin: 0; 
        padding: 0; 
        font-family: "Microsoft YaHei", sans-serif; 
        display: flex; 
        height: 100vh; 
    }
    
    .sidebar { 
        width: 180px; 
        background-color: #2c3e50; 
        color: white; 
        display: flex; 
        flex-direction: column; 
    }
    .sidebar h3 { 
        text-align: center; 
        padding: 20px 0; 
        border-bottom: 1px solid #34495e; 
        margin: 0; 
    }
    .menu-item { 
        padding: 15px 20px; 
        color: #ecf0f1; 
        text-decoration: none; 
        display: block; 
        border-bottom: 1px solid #34495e; 
    }
    .menu-item:hover { 
        background-color: #34495e; 
    }
    .menu-item.active { 
        background-color: #3498db; 
    }
    .submenu-item {
        padding: 12px 20px 12px 40px;
        font-size: 14px;
        color: #bdc3c7;
        text-decoration: none;
        display: block;
        border-bottom: 1px solid #34495e;
    }
    .submenu-item:hover {
        background-color: #34495e;
    }
    .submenu-item.active {
        background-color: #2980b9;
        color: white;
    }
    
    .content {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
    }
    
    h1 {
        color: #2c3e50;
        margin-bottom: 20px;
    }

    .back-btn {
        display: inline-block;
        padding: 8px 15px;
        background-color: #95a5a6;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin-bottom: 20px;
    }
    .back-btn:hover {
        background-color: #7f8c8d;
    }

    .config-container {
        background: white;
        padding: 30px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        max-width: 600px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
    }

    .form-group select,
    .form-group input[type="number"] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
    }

    .form-group select:focus,
    .form-group input[type="number"]:focus {
        outline: none;
        border-color: #3498db;
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .checkbox-group input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        text-decoration: none;
        display: inline-block;
    }
    .btn-primary {
        background-color: #3498db;
        color: white;
    }
    .btn-primary:hover {
        background-color: #2980b9;
    }
    .btn-secondary {
        background-color: #95a5a6;
        color: white;
    }
    .btn-secondary:hover {
        background-color: #7f8c8d;
    }

    .btn-group {
        display: flex;
        gap: 10px;
        margin-top: 30px;
    }

    .info-box {
        background-color: #e8f4f8;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin-top: 20px;
        border-radius: 4px;
        font-size: 13px;
        color: #555;
    }

    .info-box strong {
        color: #2c3e50;
    }
    </style>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var msg = window.location.search;
        if (msg.includes('SaveSuccess')) {
            alert('å®šæ—¶ä»»åŠ¡é…ç½®ä¿å­˜æˆåŠŸï¼');
        }

        // å½“é€‰æ‹©"æ¯å‘¨"æ—¶ï¼Œæ˜¾ç¤ºæ˜ŸæœŸå‡ é€‰æ‹©æ¡†
        var frequencySelect = document.getElementById('frequency');
        var dayOfWeekGroup = document.getElementById('day_of_week_group');
        
        function toggleDayOfWeek() {
            if (frequencySelect.value === 'weekly') {
                dayOfWeekGroup.style.display = 'block';
            } else {
                dayOfWeekGroup.style.display = 'none';
            }
        }
        
        frequencySelect.addEventListener('change', toggleDayOfWeek);
        toggleDayOfWeek(); // åˆå§‹åŒ–
    });
    </script>
</head>
<body>
    <div class="sidebar">
        <h3>æ¡£æ¡ˆå®¡æ ¸ç®¡ç†</h3>
        <a href="/stats" class="menu-item {{if eq .ActiveMenu "stats"}}active{{end}}">ç»Ÿè®¡ä¿¡æ¯</a>
        <a href="/device/filelist" class="menu-item {{if eq .ActiveMenu "filelist"}}active{{end}}">å»ºæ¡£æ˜ç»†</a>
        <a href="/device/filelist" class="submenu-item {{if eq .SubMenu "device_filelist"}}active{{end}}">è®¾å¤‡å»ºæ¡£æ˜ç»†</a>
        <a href="/checkpoint/filelist" class="submenu-item {{if eq .SubMenu "checkpoint_filelist"}}active{{end}}">å¡å£å»ºæ¡£æ˜ç»†</a>
        <a href="/audit" class="menu-item {{if eq .ActiveMenu "audit"}}active{{end}}">æ¡£æ¡ˆå®¡æ ¸</a>
        <a href="/audit/progress" class="submenu-item {{if eq .SubMenu "audit_progress"}}active{{end}}">è®¾å¤‡å®¡æ ¸è¿›åº¦</a>
        <a href="/audit/progress/video-reminders" class="submenu-item active">å½•åƒå¤©æ•°ä¸è¶³æé†’</a>
        <a href="/checkpoint/progress" class="submenu-item {{if eq .SubMenu "checkpoint_progress"}}active{{end}}">å¡å£å®¡æ ¸è¿›åº¦</a>
        <a href="/audit/statistics" class="submenu-item {{if eq .SubMenu "audit_statistics"}}active{{end}}">æœˆåº¦å»ºæ¡£æ•°æ®</a>
        <a href="/users" class="menu-item {{if eq .ActiveMenu "settings"}}active{{end}}">ç³»ç»Ÿè®¾ç½®</a>
        <a href="/users" class="submenu-item {{if eq .SubMenu "users"}}active{{end}}">ç”¨æˆ·ä¿¡æ¯</a>
        <a href="/permission" class="submenu-item {{if eq .SubMenu "permission"}}active{{end}}">æƒé™è®¾ç½®</a>
        <a href="/taskconfig" class="submenu-item {{if eq .SubMenu "task_config"}}active{{end}}">ä»»åŠ¡é…ç½®</a>
        <a href="/logs" class="submenu-item {{if eq .SubMenu "logs"}}active{{end}}">æ“ä½œæ—¥å¿—</a>
    </div>

    <div class="content">
        <a href="/audit/progress/video-reminders" class="back-btn">â† è¿”å›å½•åƒæé†’åˆ—è¡¨</a>
        <h1>å½•åƒæé†’å®šæ—¶ä»»åŠ¡é…ç½®</h1>
        
        <div class="config-container">
            <form method="POST" action="/audit/progress/video-reminders/schedule">
                <div class="form-group">
                    <label for="frequency">æ‰§è¡Œé¢‘ç‡ <span style="color: red;">*</span></label>
                    <select id="frequency" name="frequency" required>
                        <option value="daily" {{if eq .Config.Frequency "daily"}}selected{{end}}>æ¯å¤©</option>
                        <option value="weekly" {{if eq .Config.Frequency "weekly"}}selected{{end}}>æ¯å‘¨</option>
                    </select>
                </div>

                <div class="form-group" id="day_of_week_group" style="display: {{if eq .Config.Frequency "weekly"}}block{{else}}none{{end}};">
                    <label for="day_of_week">æ¯å‘¨æ‰§è¡Œæ—¥æœŸ <span style="color: red;">*</span></label>
                    <select id="day_of_week" name="day_of_week">
                        <option value="1" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 1)}}selected{{end}}>å‘¨ä¸€</option>
                        <option value="2" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 2)}}selected{{end}}>å‘¨äºŒ</option>
                        <option value="3" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 3)}}selected{{end}}>å‘¨ä¸‰</option>
                        <option value="4" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 4)}}selected{{end}}>å‘¨å››</option>
                        <option value="5" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 5)}}selected{{end}}>å‘¨äº”</option>
                        <option value="6" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 6)}}selected{{end}}>å‘¨å…­</option>
                        <option value="7" {{if and (eq .Config.Frequency "weekly") .Config.DayOfWeek.Valid (eq .Config.DayOfWeek.Int64 7)}}selected{{end}}>å‘¨æ—¥</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="hour">æ‰§è¡Œæ—¶é—´ <span style="color: red;">*</span></label>
                    <select id="hour" name="hour" required>
                        <option value="1" {{if eq .Config.Hour 1}}selected{{end}}>1:00</option>
                        <option value="2" {{if eq .Config.Hour 2}}selected{{end}}>2:00</option>
                        <option value="3" {{if eq .Config.Hour 3}}selected{{end}}>3:00</option>
                        <option value="4" {{if eq .Config.Hour 4}}selected{{end}}>4:00</option>
                        <option value="5" {{if eq .Config.Hour 5}}selected{{end}}>5:00</option>
                        <option value="6" {{if eq .Config.Hour 6}}selected{{end}}>6:00</option>
                        <option value="7" {{if eq .Config.Hour 7}}selected{{end}}>7:00</option>
                        <option value="8" {{if eq .Config.Hour 8}}selected{{end}}>8:00</option>
                        <option value="9" {{if eq .Config.Hour 9}}selected{{end}}>9:00</option>
                        <option value="10" {{if eq .Config.Hour 10}}selected{{end}}>10:00</option>
                        <option value="11" {{if eq .Config.Hour 11}}selected{{end}}>11:00</option>
                        <option value="12" {{if eq .Config.Hour 12}}selected{{end}}>12:00</option>
                        <option value="13" {{if eq .Config.Hour 13}}selected{{end}}>13:00</option>
                        <option value="14" {{if eq .Config.Hour 14}}selected{{end}}>14:00</option>
                        <option value="15" {{if eq .Config.Hour 15}}selected{{end}}>15:00</option>
                        <option value="16" {{if eq .Config.Hour 16}}selected{{end}}>16:00</option>
                        <option value="17" {{if eq .Config.Hour 17}}selected{{end}}>17:00</option>
                        <option value="18" {{if eq .Config.Hour 18}}selected{{end}}>18:00</option>
                        <option value="19" {{if eq .Config.Hour 19}}selected{{end}}>19:00</option>
                        <option value="20" {{if eq .Config.Hour 20}}selected{{end}}>20:00</option>
                        <option value="21" {{if eq .Config.Hour 21}}selected{{end}}>21:00</option>
                        <option value="22" {{if eq .Config.Hour 22}}selected{{end}}>22:00</option>
                        <option value="23" {{if eq .Config.Hour 23}}selected{{end}}>23:00</option>
                        <option value="24" {{if eq .Config.Hour 24}}selected{{end}}>24:00</option>
                    </select>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="enabled" name="enabled" value="1" {{if .Config.Enabled}}checked{{end}}>
                        <label for="enabled" style="margin: 0; font-weight: normal; cursor: pointer;">å¯ç”¨å®šæ—¶ä»»åŠ¡</label>
                    </div>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn btn-primary">ä¿å­˜é…ç½®</button>
                    <a href="/audit/progress/video-reminders" class="btn btn-secondary">å–æ¶ˆ</a>
                </div>
            </form>

            <div class="info-box">
                <strong>ğŸ’¡ è¯´æ˜ï¼š</strong><br>
                â€¢ å®šæ—¶ä»»åŠ¡ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´è‡ªåŠ¨æ‰«æåˆ°æœŸçš„å½•åƒæé†’ä»»åŠ¡<br>
                â€¢ åˆ°æœŸçš„æé†’ä»»åŠ¡çŠ¶æ€ä¼šè‡ªåŠ¨æ›´æ–°ä¸º"å·²é€šçŸ¥"<br>
                â€¢ ä¿®æ”¹é…ç½®åï¼Œå®šæ—¶ä»»åŠ¡ä¼šåœ¨ä¸‹æ¬¡æ‰§è¡Œæ—¶åº”ç”¨æ–°é…ç½®<br>
                {{if .Config.UpdatedBy.Valid}}
                <br>â€¢ æœ€åæ›´æ–°ï¼š{{.Config.UpdatedAt.Format "2006-01-02 15:04:05"}}ï¼ˆ{{.Config.UpdatedBy.String}}ï¼‰
                {{end}}
            </div>
        </div>
    </div>
</body>
</html>

